set(FILE_SUFFIX "")
if(VCPKG_TARGET_IS_OSX)
	set(FILE_SUFFIX "-osx")
	set(FILE_HASH "e1df46fe8c74e1331ec78d05faf2214c7859f7bf3b1ad8f066037d2aafe5b2dd5a722ab762e6bd306e969f67dd4dc1beeed9194b0a80ebb33b394db47439285a")
elseif(VCPKG_TARGET_IS_LINUX)
	set(FILE_SUFFIX "-linux")
	set(FILE_HASH "8ab21c3e6fcd27a01c3836f13af2586852c5971e7a9d98f809ecb9268ba8d23917afe55520321c22f27d8c238dc95fc20f2baa879ef2ba85035fcc20550e395e")
elseif(VCPKG_TARGET_IS_ANDROID)
	set(FILE_SUFFIX "-android")
	set(FILE_HASH "7aa0828ea90aa3616887df345c6504d5e549a831be108a9ae8ee54fc794b2f8c500206fa9616c04fa83980846c3ba580ca80b93254e8c9e32e67e21fbce1e99c")
elseif(VCPKG_TARGET_IS_IOS)
	set(FILE_SUFFIX "-ios")
	set(FILE_HASH "cb88a311aa00f89874a7a187cd4dcf9c40699007311d8e474914815399877c4ff4b6498fc1012956c7db13fca3e85aace98dc25942e9b0930ee9caca73c6e814")
else()
	set(FILE_HASH "e7f062c824abe26f02b6a98ff8ced19afdc43add2f3bcb2ca86c78985691e9ee2228aee4e660300e30b7b48de123bb95c51aa98f8e3b0d4fc55a5ddd008f6b59")
endif()
vcpkg_download_distfile(ARCHIVE
    URLS "https://nvgt.dev/downloads/bass/bassmix${VERSION}${FILE_SUFFIX}.zip"
    FILENAME "bassmix${VERSION}${FILE_SUFFIX}.zip"
    SHA512 ${FILE_HASH}
)
vcpkg_extract_source_archive(
    SOURCE_PATH
    ARCHIVE "${ARCHIVE}"
    NO_REMOVE_ONE_LEVEL
)
if(VCPKG_TARGET_IS_WINDOWS)
	file(INSTALL "${SOURCE_PATH}/c/bassmix.h" DESTINATION "${CURRENT_PACKAGES_DIR}/include")
	file(INSTALL "${SOURCE_PATH}/c/x64/bassmix.lib" DESTINATION "${CURRENT_PACKAGES_DIR}/lib")
	file(INSTALL "${SOURCE_PATH}/x64/bassmix.dll" DESTINATION "${CURRENT_PACKAGES_DIR}/bin")
elseif(VCPKG_TARGET_IS_OSX)
	file(INSTALL "${SOURCE_PATH}/bassmix.h" DESTINATION "${CURRENT_PACKAGES_DIR}/include")
	file(INSTALL "${SOURCE_PATH}/libbassmix.dylib" DESTINATION "${CURRENT_PACKAGES_DIR}/lib")
elseif(VCPKG_TARGET_IS_LINUX)
	file(INSTALL "${SOURCE_PATH}/bassmix.h" DESTINATION "${CURRENT_PACKAGES_DIR}/include")
	if(VCPKG_TARGET_ARCHITECTURE STREQUAL "arm64")
		file(INSTALL "${SOURCE_PATH}/libs/aarch64/libbassmix.so" DESTINATION "${CURRENT_PACKAGES_DIR}/lib")
	else()
		file(INSTALL "${SOURCE_PATH}/libs/x86_64/libbassmix.so" DESTINATION "${CURRENT_PACKAGES_DIR}/lib")
	endif()
elseif(VCPKG_TARGET_IS_ANDROID)
	file(INSTALL "${SOURCE_PATH}/c/bassmix.h" DESTINATION "${CURRENT_PACKAGES_DIR}/include")
	file(INSTALL "${SOURCE_PATH}/libs/arm64-v8a/libbassmix.so" DESTINATION "${CURRENT_PACKAGES_DIR}/lib")
elseif(VCPKG_TARGET_IS_IOS)
	file(INSTALL "${SOURCE_PATH}/bassmix.h" DESTINATION "${CURRENT_PACKAGES_DIR}/include")
	file(INSTALL "${SOURCE_PATH}/bassmix.xcframework" DESTINATION "${CURRENT_PACKAGES_DIR}/lib")
endif()
